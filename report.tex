\documentclass[conference]{IEEEtran}
\IEEEoverridecommandlockouts
% The preceding line is only needed to identify funding in the first footnote. If that is unneeded, please comment it out.
\usepackage{cite}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{algorithmic}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\begin{document}

\title{SMDE Assignment}

\author{\IEEEauthorblockN{1\textsuperscript{st} Carles Matoses}
\IEEEauthorblockA{carles.matoses@estudiantat.upc.edu}
\and
\IEEEauthorblockN{2\textsuperscript{nd} Ignasi Granell}
\IEEEauthorblockA{ignasi.granell@estudiantat.upc.edu}
\and
\IEEEauthorblockN{3\textsuperscript{rd} Isabel Castañeda}
\IEEEauthorblockA{isabel.castaneda@estudiantat.upc.edu}
}

\maketitle

\begin{abstract}
This document is a model and instructions for \LaTeX.
This and the IEEEtran.cls file define the components of your paper [title, text, heads, etc.]. *CRITICAL: Do Not Use Symbols, Special Characters, Footnotes, 
or Math in Paper Title or Abstract.
\end{abstract}

\begin{IEEEkeywords}
component, formatting, style, styling, insert
\end{IEEEkeywords}

\section*{Introduction}
This document is a model and instructions for \LaTeX.
Please observe the conference page limits. 

\section{Problem description}
% add the issues you detect. 
% In the Marathon, are enough resources for the runners? (WC, water sources, meals…), there are some unexpected queues, what about make the race on august?
We are provided with three marathon results, from a Kaggle dataset, on the years 2015, 2016 and 2017. The data is structured in a way that we have the runners' information, the time they took to get to interest points and the time they took to finish the race. Some of the most relevant variables we are provided are: the age, the gender and the city of origin. We believe this characteristics have a direct impact on the performance of the runners.

Reading the paper \cite{b8}, we concluded that, effectively, environmental conditions have a direct impact on the performance of runners. The paper states that the temperature has a positive impact (longer races) and high humidity and high wind speed have a negative impact on the performance of the runners (faster races).

% Some ideas about this (since i do not know what the proffessor wants):
% - The temperature analysis only takes into account a small range of 5◦C to 24.5◦C, maybe results would be different if we consider hotter enviorments.
% - The wind speed analysis does not seem to explain wind direction. Maybe its usually the same direction in this place
% 
\section{System description, introduction}
% Describe the system to be modeled (not the problem, not the data), other elements must be described on the subsequent sections of the document.
% Do we need to define what a system is? I don't think so
The system to be modelled is the ``Barcelona Marathon''. This marathon involves runners of different skill levels, ages, and genders, coming from various cities. The event is influenced by environmental factors such as rainfall and temperature, all of which can impact runner performance. 

Runners rely on essential supplies, including water, food, and medical assistance, to complete the marathon safely. The course is structured as a linear system, where participants progress from one checkpoint to the next. Along the way, they encounter resupply points, which have limited capacities. If demand exceeds supply, queues may form, potentially delaying runners. Environmental conditions also play a significant role in the system, affecting both individual runner performance and the overall flow of the event.

In summary, the system comprises the marathon course, checkpoints, and resupply points, along with the interactions between runners, resources, and environmental conditions.


\section{Model specification}
% We will build a simulation model that represents a set of runners and how the climate conditions affect them.
% Clearly define the model entities, operations and processes that defines the behavior of the model. We must use here DEVS, Petri Nets or SDL, but since we are not going to use those formal languages, define a flow diagram to simplify the definition of the model. Since we are using GPSS you can use the GPSS icons of the language.

For this model, the entities and attributes are the following:

% TODO: 
% - carles: esto esta mal, lo tendremos que ajustar a nuestro modelo
% - carles: lo he arreglado un poco añadiendo nuevos atributos y eliminando otros.
\begin{itemize}
    \item \textbf{Runners}: The runners are the main entities in the system. They have attributes such as age, genre, and city of origin. They interact with the system by running the marathon.
    \item \textbf{Rainfall}: The rainfall is an environmental attribute that affects the performance of the runners.
    \item \textbf{Temperature}: The temperature is an environmental attribute that affects the performance of the runners.
    \item \textbf{Wind}: The wind is an environmental attribute .
    \item \textbf{Humidity}: The humidity is an environmental attribute.
    \item \textbf{Level}: The level of the runner is determined by the time it takes to finish the first 5. The standard deviation of runners dependens on they're level. 
\end{itemize}

The operations of the model will be reduced to runners arriving at the end line. The processes of the model will be the following:
\begin{itemize}
    \item \textbf{Generate runner}: The model will generate a runner .
    \item \textbf{Begins running}: The runner starts at the starting line and begins running.
    \item \textbf{Ends running}: The runner finishes the race.
\end{itemize}

In this process, the model will use a normal distributed random variable to determine the time it takes a runner to finish. We created different time ranges to decide the level of a runner. The ``Elite'' runners tend to run 5 km in less than 18 minutes, the ``hobby'' runners take more than 18 minutes and less than 25 and ``new'' runners take more than 25 minutes.

The model purpose differs from the system purpose. We aim to predict the consequences of the environmental conditions on the performance of the runners. The model will help us understand how the rainfall, heat, and other variables affects the performance of the runners.


% I need to know the time required for an elite male runner to finish the race. and then the female elite runner.

\subsection{Systemic Structural, Systemic Data and Simplifying Hypotheses}

\begin{itemize}
    \item \textbf{SH\_01}: The runners will keep a constant speed over the race. Only the required time to finish the race will matter.
    \item \textbf{SH\_02}: Heat, wind and rain will be combined into a single value computed by a formula.
    \item \textbf{SH\_03}: Temperature wind and humidity change over the day, usually there is more wind later on the day than at morning, temperatures rise and humidity drops. The model will ignore this fact to eventually decreese as the sun gets down. The model will not account for this behaviour and will only take the average values of the day.
    \item \textbf{SS\_01}: The runners will be split in three ``level'' groups based on the performance of the first 5 km.
    \item \textbf{SD\_01}: The runners will not be affected by ethnics or age. An Elite runner with 70 years will be classified based on the time it takes to finish the first 5 km and not his status.
    \item \textbf{SD\_02}: The time is transformed with a logarithm function to make it more normal. The results of the shapiro-wilk test and the  figures \ref{fig:elite_hobby_new_standar_deviation} and \ref{fig:new_qq} show that only elite runners follow a normal distribution. The model will ignore the outliers.
    \item \textbf{SD\_03}: Temperature humidity and wind speed will be combined into three categorical variables (low, medium, high) based on the paper \cite{b8} shown on table \ref{tab:environmental_impact}.
\end{itemize}

% TODO: maybe remove the 
\begin{table}[htbp]
\caption{Environmental Impact on Marathon Performance}
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
\textbf{} & \textbf{MAN: mean, std. dev.} & \textbf{WOMAN: mean, std. dev.} \\
\hline
\textbf{Humidity} & & \\
\hline
low & 0, 0 & 0, 0 \\
\hline
medium & -1.73, 0.22 & -1.74, 0.28 \\
\hline
high & -2.11, 0.2 & -0.90, 0.34 \\
\hline
\textbf{Temperature} & & \\
\hline
low & 0, 0 & 0, 0 \\
\hline
medium & 1.19, 0.19 & 1.38, 0.23 \\
\hline
high & 7.73, 0.18 & 7.78, 0.38 \\
\hline
\textbf{Wind Speed} & & \\
\hline
low & 0, 0 & 0, 0 \\
\hline
medium & -3.18, 0.2 & -1.90, 0.32 \\
\hline
high & -4.92, 0.2 & -0.87, 0.3 \\
\hline
\end{tabular}
\label{tab:environmental_impact}
\end{center}
\end{table}

\begin{figure}[htbp]
    \centerline{\includegraphics[width=\linewidth]{figs/elite_hobby_new_standar_deviation.png}}
    \caption{Standard deviation of race times for elite, hobby, and new runners.}
    \label{fig:elite_hobby_new_standar_deviation}
\end{figure}

\begin{figure}[htbp]
    \centerline{\includegraphics[width=\linewidth]{figs/elite_hobby_new_qq.png}}
    \caption{Q-Q plot for new runners.}
    \label{fig:new_qq}
\end{figure}

\begin{table}[htbp]
\caption{Gender Percentage in Runner Groups}
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
\textbf{Group} & \textbf{Male (\%)} & \textbf{Female (\%)} & \textbf{Total (\%)} \\
\hline
Elite Runners & 93.61 & 6.39 & 0.82 \\
\hline
Hobby Runners & 70.30 & 29.70 & 49.23 \\
\hline
New Runners & 38.74 & 61.26 & 49.38 \\
\hline
\end{tabular}
\label{tab:gender_percentage}
\end{center}
\end{table}

\section{Coding}
\subsection{Data}
Temperature and precipitations are extracted from the years 1950 to 2019 from the meteorologic service of Barcelona. The wind speed and humidity are extracted from the same source but years 2007 to 2016.
Race times are extracted from the marathon results of 2015. We calculated the mean and standard deviation of each group: elite, hobby, and new runners. The results are shown in table \ref{tab:elite_hobby_new_mean_std_dev}.

\begin{table}[htbp]
\caption{Mean and Standard Deviation of Race Times for Runner Groups}
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
\textbf{Group} & \textbf{Mean Time (min)} & \textbf{Standard Deviation (min)} \\
\hline
Elite Runners & 153.92 & 10.66 \\
\hline
Hobby Runners & 198.63 & 19.24 \\
\hline
New Runners & 255.00 & 35.26 \\
\hline
\end{tabular}
\label{tab:elite_hobby_new_mean_std_dev}
\end{center}
\end{table}

\begin{table}[htbp]
\caption{Monthly Temperature and Wind Data}
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
\textbf{Month} & \textbf{Max Temp (°C)} & \textbf{Min Temp (°C)} & \textbf{Wind (km/h)} \\
\hline
Jan & 11.11 & 5.28 & 16.95 \\
\hline
Feb & 12.22 & 5.46 & 14.25 \\
\hline
Mar & 14.65 & 7.30 & 14.80 \\
\hline
Apr & 16.89 & 8.95 & 12.90 \\
\hline
May & 20.53 & 12.32 & 14.00 \\
\hline
Jun & 24.60 & 16.12 & 10.65 \\
\hline
Jul & 27.84 & 19.00 & 17.65 \\
\hline
Aug & 27.71 & 19.08 & 12.75 \\
\hline
Sep & 24.42 & 16.67 & 12.10 \\
\hline
Oct & 19.99 & 13.23 & 15.85 \\
\hline
Nov & 14.74 & 8.83 & 15.15 \\
\hline
Dec & 11.75 & 6.22 & 16.35 \\
\hline
Avg & 18.00 & 11.00 & 14.00 \\
\hline
\end{tabular}
\label{tab:monthly_temp_wind}
\end{center}
\end{table}

\begin{table}[htbp]
\caption{Monthly Precipitation and Humidity Data}
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
\textbf{Month} & \textbf{Precipitation (mm)} & \textbf{Humidity (\%)} \\
\hline
Jan & 42.74 & 68 \\
\hline
Feb & 36.53 & 65 \\
\hline
Mar & 51.46 & 64 \\
\hline
Apr & 54.91 & 67 \\
\hline
May & 58.24 & 65 \\
\hline
Jun & 37.25 & 60 \\
\hline
Jul & 28.75 & 63 \\
\hline
Aug & 43.68 & 65 \\
\hline
Sep & 73.14 & 68 \\
\hline
Oct & 88.29 & 72 \\
\hline
Nov & 62.91 & 69 \\
\hline
Dec & 47.32 & 67 \\
\hline
Avg & 55.00 & 66 \\
\hline
\end{tabular}
\label{tab:monthly_precip_humidity}
\end{center}
\end{table}
\section{Definition of the experimental framework}
\begin{enumerate}
    \item \textbf{Design of the DOE}
    
    To evaluate the effects of key factors on marathon performance, we implemented a basic Design of Experiments (DOE). The factors considered in this study are:
    \begin{itemize}
        \item \textbf{Temperature (TEMP)}: Represented as levels (e.g., 0 for low, 1 for medium, and 2 for high).
        \item \textbf{Humidity (HUM)}: Represented similarly with levels for low, medium, and high.
        \item \textbf{Supplies (SUPPL)}: Two levels are considered: low (0) and high (1).
    \end{itemize}
    The primary goal of the DOE is to identify the optimal combination of these factors that minimises the average time it takes for runners to complete the race. In this context, “best” is defined as achieving the lowest average time while maintaining manageable resource usage.
    
    The implementation uses functions to dynamically assign values for these factors to runners during the simulation. Each runner’s performance is calculated using the following formula:

    % I don't know how to put it smaller
    \[
        Run Time = \frac{BaseTime(Mean+StdDev)+TEMPImpact+HUMImpact}{Stages}
    \]
    This ensures that the impact of temperature, humidity, and supplies is directly incorporated into the simulation of each runner's race.
    \item \textbf{Execution of the Replications}
    
    The DOE is executed by:
    \begin{itemize}
        \item \textbf{Generating runners dynamically}: Runners are created using the GENERATE statement, with their attributes (level, gender, TEMP, HUM) assigned through predefined functions.
        \item \textbf{Simulating the race}: The simulation progresses through 10 stages, with each runner advancing at a calculated pace based on the environmental factors and their personal attributes.
        \item \textbf{Replicating the experiment}: For each configuration of factors, multiple runners are simulated to provide robust results. While the current implementation doesn't explicitly iterate through all combinations of factors, the setup allows for adjustments to test specific configurations.
    \end{itemize}
    \item \textbf{Detection and Analysis of Interactions}
    The simulation setup inherently supports the evaluation of both main effects (e.g., how TEMP alone impacts performance) and interactions (e.g., how TEMP and HUM together influence results). These interactions are captured through the combined terms in the runner’s performance calculation.
    \item \textbf{Summary of Findings}
    This experimental framework provides a flexible yet powerful way to test different configurations and observe their impact on runner performance.
    % EXPAND
\end{enumerate}
\section{Model validation}
Validating the model is an essential step to ensure that it realistically represents the marathon and produces meaningful results. To achieve this, we applied several validation techniques as suggested in the literature. Each technique focuses on a specific aspect of the model’s accuracy and reliability.
% I defined 5 validations but we can decide which ones to do
\begin{enumerate}
    \item \textbf{Conceptual Validation}
    \begin{itemize}
        \item \textbf{Objective}: To confirm that the model’s structure and assumptions are consistent with real-world behaviour.
        \item \textbf{Approach}: We reviewed the model’s assumptions, such as the simplification that runners maintain a constant speed within each stage, against insights from previous studies on marathon performance. Additionally, the logic and processes implemented in the simulation were compared with known dynamics of marathon events to ensure consistency.
    \end{itemize}
    \item \textbf{Data Validation}
        \begin{itemize}
        \item \textbf{Objective}: To verify that the input data is accurate and suitable for the simulation.
        \item \textbf{Approach}: Historical weather data from Observatori Fabra was cross-checked with official sources to ensure its reliability. Runners’ attributes, such as performance levels and physiological factors, were validated against publicly available datasets (e.g., Kaggle marathon data).
    \end{itemize}
    \item \textbf{Dynamic Validation}
        \begin{itemize}
        \item \textbf{Objective}: To ensure the model’s behaviour aligns with expectations during the simulation.
        \item \textbf{Approach}: Step-by-step checks of simulation outputs were conducted to verify that changes in inputs (e.g., temperature or humidity) produced logical trends, such as higher temperatures leading to longer completion times. A sensitivity analysis was performed to identify the influence of minor input variations on the results.
    \end{itemize}
    \item \textbf{Predictive Validation}
        \begin{itemize}
        \item \textbf{Objective}: To evaluate the model’s ability to replicate real-world results.
        \item \textbf{Approach}: Outputs from the simulation were compared to actual data from the Barcelona Marathon and other similar events, focusing on key metrics such as average completion times under comparable weather conditions.
    \end{itemize}
    \item \textbf{Statistical Validation}
        \begin{itemize}
        \item \textbf{Objective}: To ensure the results of the simulation are statistically robust and reliable.
        \item \textbf{Approach}: Statistical tests, including ANOVA, were used to evaluate whether differences in race times across various conditions were statistically significant. Tests for normality and variance homogeneity were applied to validate the assumptions required for further analysis.
    \end{itemize}

\end{enumerate}

\section{Results/Conclusions}
% NOT CONVINCED: The temperature effect may not be the most correctly used attribute of the enviorment. The effect of heat is based frm a range between 5 and 24.5 degrees, which is not a very wide range. The wind speed analysis does not seem to explain wind direction. Maybe its usually the same direction in this place.


\begin{thebibliography}{00}
% \bibitem{b1} G. Eason, B. Noble, and I. N. Sneddon, ``On certain integrals of Lipschitz-Hankel type involving products of Bessel functions,'' Phil. Trans. Roy. Soc. London, vol. A247, pp. 529--551, April 1955.
% \bibitem{b2} J. Clerk Maxwell, A Treatise on Electricity and Magnetism, 3rd ed., vol. 2. Oxford: Clarendon, 1892, pp.68--73.
% \bibitem{b3} I. S. Jacobs and C. P. Bean, ``Fine particles, thin films and exchange anisotropy,'' in Magnetism, vol. III, G. T. Rado and H. Suhl, Eds. New York: Academic, 1963, pp. 271--350.
% \bibitem{b4} K. Elissa, ``Title of paper if known,'' unpublished.
% \bibitem{b5} R. Nicole, ``Title of paper with only first word capitalized,'' J. Name Stand. Abbrev., in press.
% \bibitem{b6} Y. Yorozu, M. Hirano, K. Oka, and Y. Tagawa, ``Electron spectroscopy studies on magneto-optical media and plastic substrate interface,'' IEEE Transl. J. Magn. Japan, vol. 2, pp. 740--741, August 1987 [Digests 9th Annual Conf. Magnetics Japan, p. 301, 1982].
% \bibitem{b7} M. Young, The Technical Writer's Handbook. Mill Valley, CA: University Science, 1989.
\bibitem{b8} B. Knechtle, C. McGrath, O. Goncerz, E. Villiger, P. T. Nikolaidis, T. Marcin, and C. V. Sousa, ``The Role of Environmental Conditions on Master Marathon Running Performance in 1,280,557 Finishers the ‘New York City Marathon’ From 1970 to 2019,'' Frontiers in Physiology, vol. 12, 2021. [Online]. Available: https://www.frontiersin.org/journals/physiology/articles/10.3389/fphys.2021.665761. DOI: 10.3389/fphys.2021.665761. ISSN: 1664-042X.


\end{thebibliography}
\vspace{12pt}

\end{document}
